---
title: 软件建模认知5（面向服务）
categories: 软件构造思想
---

### 面向服务的体系结构定义

面向服务的体系结构是一种由多个自治的服务组成的分布式软件体系结构。这些服务是分布式的，可以在不同的节点上运行并且由不同的服务提供者来提供。各个服务可以在不同平台上运行，并且能够用不同语言实现。服务间使用标准的协议支持服务间的通信和信息交换。为了使应用能够发现并与服务进行通信，每一个服务都有一个服务描述。这些描述定义了服务的名字、服务的位置以及服务的数据交换要求。

### 原则

* 松耦合
* 服务契约
* 自治
* 抽象
* 可复用性
* 可组合性
* 无状态性
* 可发现性

### 代理者

* 服务须向代理者注册
* 客户请求服务需要通过代理者转发
* 代理者提供客户发现服务的方式
* 白页代理提供特定服务地址，黄页代理提供服务类型信息列表

### 技术支持

* 构件间通信协议：SOAP简单对象访问协议。定义了发送XML编码数据的统一方法：一个信封，定义了一个描述消息内容以及消息处理方式的框架；一组编码规则，描述了特定应用的数据类型实例；一个表示远程过程调用和响应的协定。

* 发布注册服务。服务库被提供用于支持基于万维网的服务发布和定位。服务提供者将服务注册到服务库中。WSDL是一种基于XML的语言，用于描述一个服务做什么，在哪里和如何调用它。

* 代理和发现服务。在分布式环境中，对象代理者是客户端和服务间的交互中介。关于web服务的信息能够通过用于web服务集成的统一描述、发现和集成UDDI框架来定义。一个UDDI规约由几个相关的文档和一个XML模式组成，该XML模式定义了一种基于SOAP的用于web服务注册和发现的协议。weh服务代理者可以使用UDDI框架为客户端提供一种在web上动态发现服务的机制。

### 服务事务

* 原子性。
* 一致性。
* 隔离性。
* 持续性。

* 两段式提交协议模式：事务要么被提交，要么被终止。
* 复合事务模式：一个复合事务可以被分解成多个原子性事务，每个原子性事务可以单独执行和回滚。
* 长事务模式：将一些用户参与的长事务分割成两个或多个单独的服务，使得人的决策发生在连续的事务对之间。

### 协商模式

客户主体作为客户代表：
* 提出一个服务。
* 请求一个服务。
* 拒绝一个服务报价。

服务主体代表着服务：
* 报价一个服务。
* 拒绝一个客户请求/提议。
* 接受一个客户请求/提议。

### 服务协调

涉及多个服务的面向服务的体系结构应用需要在服务之间进行协调。为了确保服务间松耦合，将协调的实现细节和各个服务的功能相分离会比较好。面向服务的体系结构提供了不同类型的协调机制，包括编排和编制。

* 编制：集中式控制工作流协调逻辑。在此基础上可以通过将已有的服务引入到新的服务应用中来实现服务的复用。
* 编排：分布式服务之间的协调。可以用于针对来自不同服务提供商，由不同业务组织提供的服务之间的协作。

### 服务复用

为提升服务复用，服务只提供供给接口，没有请求接口。

### 总结

面向服务体系结构的应用，更多的是以服务为概念提供了可复用的构件，以及其使用的方式等。
