---
title: 操作系统学习-进程与线程2
categories: 编程基础
---

### 前言

上一篇我总结出了在撇开操作系统层面，而在应用程序开发层面，我们需要用到多线程实现一些需求。

但是实现这些需求，需要考虑什么呢？因为现在线程只是个执行任务的抽象。如果想深入研究，便要将其想象成一个正在运行的实体。其需要运行，便需要交互，便需要资源。

这篇文章更多地是从应用开发的角度来认知线程。

### 状态

* 执行
* 就绪
* 阻塞

### 创建与终止

任务线程都是从一个点开始执行，此时只有一个线程。

然后根据任务的工作细节，会将不同的任务分配给不同的线程。不同的时间段，会有不同的线程创建与终止。

但核心是，线程的产生会与已经存在的线程产生关系，并相互制约，可能是在资源上，也可能是在执行逻辑上。所以在有多个线程执行一个任务时，相互间的制约关系会是一个重点。

### 线程间的同步与通信

所以，我们来到了重点：在每个线程都充当固定的角色，执行固定的逻辑，还有需要固定的资源时，如何使其相互合作，并利用有限的资源，按我们的需求来完成任务？

是的，我们需要线程间的同步与通信机制，来确保不管是运行的顺畅，或是结果的正确性。

* 互斥锁
* 条件变量
* 信号量

互斥锁是为了防止同时对同一资源进行操作。

条件变量是为了在互斥锁的基础之上，添加一个变量标识资源的情况，从而使其他线程根据这个标识，进行获取或等待资源的判断。

信号量其实是标识此时资源被线程使用的情况，然后通过信号量，让其他线程认识到此时资源的使用情况，以做出判断，是否可以使用资源。

### 总结

通过这次对线程的理解，其实核心还是解决资源利用的矛盾问题。线程的创建，执行，阻塞，终止反而并不是难点，但是如何组织线程相互协作，并合理分配使用资源，从而达到最后任务目标的正确性，这才是我们需要花时间考虑的地方。