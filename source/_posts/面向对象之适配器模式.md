---
title: 面向对象之适配器模式
---

### 前言

事物都是从无到有，从纯存在到丰富的内涵。那适配器又为何存在？从何而来呢？

### 简单的问题

在面向对象的世界中，一个问题的产生和解决，都是围绕着类，对象，接口，以及他们之间存在的关系而产生的。在一个问题的解决方案产生时，我们会尽可能地以简单的解决方案解决问题。所以，一般都是：

* 一个接口：定义了边界的交互行为。
* 一个实现： 定义了对接口行为的实现。

于是，客户端在使用服务时，直接调用接口，接口调用实现，于是问题解决。如果对同一接口有不同的类型需求，只要将实现类都继承自同一接口便可以了。所以，我想生产“一种饮料”，调用这个接口。我想生产“多种饮料”，还是调用这个接口。

### 适配器从何而来？

从唯物的角度，运动是客观事务的基本属性。软件作为一个客观存在，变化是常态。上级多了一个需求，不论是功能的，还是非功能的，都要改源码。

这时，客户在“某一种类的饮料”有了新的两个需求，需要我们在原来的接口中再加两个方法，以实现需求。

很简单，在接口中再加两个方法，其他种类饮料加两个空方法实现。再在指定的方法中加上那两种方法的实现。成功！！！

但是之后发现，添加的需求中，总有一些频繁的，和接口定义不大相符的变化的需求，特别是会频繁地影响到原来的接口定义。所以问题来了-不仅类库里面依赖这个接口的类定义要频繁变更，依赖于这个接口的客户端也要频繁的地变更实现。这不管是对类库编写者，还是以及大量依赖类库的客户端的用户，都是一个极大的灾难。

此时，我们会思考，有没有什么方法解决这个问题？解决这个频繁更改接口的问题？

于是，我们想到，可以将变换的部分给分离出去，作为一个单独的接口定义和类定义实现。与此同时，我们便需要一个适配器的角色，一是使用这个适配器类来适配（实现）相对固定实现，不太变动的，对客户端曝露的接口。另一方面则是在适配器类实现中，调用比较频繁变更的接口，以此实现对比较频繁变更的部分的逻辑的调用。

那频繁变更的部分逻辑对应的接口定义还是不断变更的呀，那只是将变更从一个接口转移到另一个接口中，有什么意义呢？

我认为，类库曝露出去的接口定义是几乎是固定不变的。也就是频繁变更的部分的接口定义，不应该曝露给客户端，因为这样会导致客户端受到类库变更的影响很大。所以适配器在类库中，将需求接口变更隔离在类库内，至于客户端，对变更几乎没感觉。

### 总结

适配器的应用前提是需求的不断变更，但是却又要将变更隔离在某个范围内部，使边界部分不受需求变更的影响。则此时，适配器则是一个不错的选择。

以上是我的想法，错误之处，多多包涵。