---
title: velocity总体概述
categories: web技术
---

### 原文链接

http://velocity.apache.org/engine/devel/overview.html

### 总体概述

velocity是一个有很多用途的模板引擎。一些常用velocity的应用类型如下：

* web应用。web设计者创建插入动态信息的HTML页面。页面被VelocityViewServket处理或者其他可以支持velocity的框架。这种web应用的开发方式叫模型-视图-控制器，也是为了一个对于运用Java Server Pages或者PHP开发的直接替换。

* 源码生成：velocity能基于模板被用来生成Java源代码，SQL,或者PostScript。PowerdByVelocity页面列出了许多开源和商业开发软件包用velocity生成源码。

* 自动邮件。许多应用为账号注册，密码修改或自动发送消息生成自动邮件。使用velocity，邮件模板能够被储存为文本文件模式而不是之间嵌入到你的java代码里。

* XML转化：velocity提供了ant任务，名为Anakia来读取XML文件然后将其转化成velocity模板。一个普通的应用是为了转化普通“xdoc”文档成样式化的HTML文档。

### 怎么工作

velocity允许web页面设计者和其他模板编写者包含名为“引用”的标注表达式到页面中。这些引用是从上下文对象中拉来的-本质上是一个用来提供获取和设置检索和设置对象的方法的哈希表-于是相应一致的值会被直接插入到页面当中。velocity提供了基本控制表达式，用来循环迭代一个集合的值或者条件展示一块文本。其有调用任意一个java方法的能力，包括其他文件，也可以创建用来重复使用的宏变量-这也是一个用来创建动态web页面和其他文本的强大的也是容易使用的方法。

velocity强制使用通过从html模板代码分离java代码的MVC风格开发方式。不像JSPs，velocity不允许将java代码嵌入到页面当中。不像PHP，velocity不同其他方法实现一些特性。MVC开发方法式一个velocity最大的长处，也允许更多可维护和更好的设计的web页面。

即使MVC风格的开发有时可以导致web网站前期开发时长较大，特别是如果开发者刚接触MVC，这种方式从长远来看是节省时间的（相信我们，我们这样做已经很长时间了）。MVC抽象阻止web页面设计者与软件工程师的java代码，还有编程者过分地影响web网站的外观。velocity强制使用一个规定-什么人在网站开发过程的角色是清晰和分离的。

### 拓展velocity的功能

velocity在应用开发中是十分有用的，其也能拓展出许多功能。

* 指定对象的类型，通常称“Tools”，能包含没有数据的方法。当将这个放入velocity的上下文当中时，模板可以调用这些方法来执行基本的任务，像是格式化数字或者摆脱HTML实体。

* velocity提供了一个资源加载器的选择，以此从文本文件，类路径，甚至数据库检索模板。但是如果还不能够基于用户的方式来编写其自己的资源加载器。

* 事件处理器提供了一个钩子，用来展示指定事件的用户动作，比如将一个引用插入文本当中。

* 用户可以编写用户反射器，以检索引用的属性和方法。例如，你可以创建一个反射器来检索Lucene或者其他查引擎引索的数据。

* 最终，velocity的语法被一个从JavaCC生成的解析器处理，使用JJTree拓展生成抽象语法树。通过更改JavaCC指定文件和重编译，velocity语法自生能被改变。

### 确认宣告

velocity的设计概念时借助WebMacro。那些被包含入velocity项目的声明中，合适的开发和设计工作被包含在WebMacro项目中。